{"version":3,"sources":["webpack:///./index.js","webpack:///./templates/img-layout.hbs"],"names":["queryField","document","querySelector","gallery","searchButton","addEventListener","e","preventDefault","query","value","alert","text","delay","innerHTML","infScrollInstance","pageIndex","loadNextPage","undefined","target","dataset","bigurl","largeImgUrl","basicLightbox","show","infiniteScroll","responseType","history","path","this","on","response","data","JSON","parse","hits","length","markup","map","template","join","proxyElem","createElement","appendItems","querySelectorAll","Handlebars","module","exports","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"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","file":"main.974da1a0bdbcc0a05314.js","sourcesContent":["import './styles.css';\r\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\nimport { alert, notice, info, success, error } from '@pnotify/core';\r\nimport template from './templates/img-layout.hbs';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport '../node_modules/basiclightbox/src/styles/main.scss';\r\nimport infiniteScroll from 'infinite-scroll';\r\n\r\nconst queryField = document.querySelector('#search-form input');\r\nconst gallery = document.querySelector('.gallery');\r\nconst searchButton = document.querySelector('.search_button');\r\nconst loaderButton = document.querySelector('.loader_button');\r\n\r\nsearchButton.addEventListener('click', searchHandler);\r\n// loaderButton.addEventListener('mousedown', loaderHandler);\r\ngallery.addEventListener('click', modalOpener);\r\n\r\nconst baseURL =\r\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal';\r\nconst key = '18918317-3c4f84cb36b89de6c3fd9619e';\r\nlet markup;\r\nlet page = 1;\r\nlet query;\r\nlet moveY = 41;\r\n\r\n// **************************************************\r\n// реалізація через догрузочну кнопку\r\n\r\n// function searchHandler(e) {\r\n//   e.preventDefault();\r\n//   query = queryField.value;\r\n//   moveY = 41;\r\n//   if (query === '') {\r\n//     alert({\r\n//       text: 'Введи пошуковий запит',\r\n//       delay: 2000,\r\n//     });\r\n//     return;\r\n//   }\r\n\r\n//   fetch(`${baseURL}&q=${query}&page=${page}&per_page=12&key=${key}`)\r\n//     .then(response => response.json())\r\n//     .then(data => {\r\n//       if (data.hits.length === 0) {\r\n//         alert({\r\n//           text: 'Сорян, нічого не знайшов',\r\n//           delay: 2000,\r\n//         });\r\n//         queryField.value = '';\r\n//         return;\r\n//       }\r\n//       gallery.innerHTML = '';\r\n//       markup = data.hits.map(item => template(item)).join('');\r\n//       console.log(data);\r\n//       gallery.insertAdjacentHTML('beforeend', markup);\r\n//       loaderButton.style.display = 'block';\r\n//       queryField.value = '';\r\n//     });\r\n// }\r\n\r\n// function loaderHandler(e) {\r\n//   e.preventDefault();\r\n//   page += 1;\r\n\r\n// !!! цей блок можна винести в окрему функцію (рефакторинг)\r\n//   fetch(`${baseURL}&q=${query}&page=${page}&per_page=12&key=${key}`)\r\n//     .then(response => response.json())\r\n//     .then(data => {\r\n//       markup = data.hits.map(item => template(item)).join('');\r\n//       // console.log(markup);\r\n//       console.log(data);\r\n//       gallery.insertAdjacentHTML('beforeend', markup);\r\n// !!!\r\n\r\n//       window.scrollTo({\r\n//         top: (moveY += 945),\r\n//         left: 0,\r\n//         behavior: 'smooth',\r\n//       });\r\n//     });\r\n// }\r\n\r\nfunction modalOpener(e) {\r\n  if (e.target.dataset.bigurl === undefined) return;\r\n  const largeImgUrl = e.target.dataset.bigurl;\r\n  // console.log(largeImgUrl);\r\n  const liteBox = basicLightbox.create(`<img src=${largeImgUrl}/>`);\r\n  liteBox.show();\r\n}\r\n\r\n// *****************************************************\r\n// ***************************************************\r\n// infinite scroll\r\n\r\nconst infScrollInstance = new infiniteScroll(gallery, {\r\n  responseType: 'text',\r\n  history: false,\r\n  path: function () {\r\n    // якщо REST API матюкається CORS, то треба перд урлом поставити проксі: https://cors-anywhere.herokuapp.com/\r\n    return `https://cors-anywhere.herokuapp.com/${baseURL}&q=${query}&page=${this.pageIndex}&per_page=12&key=${key}`;\r\n  },\r\n});\r\n// в response прийде результат запиту\r\ninfScrollInstance.on('load', function (response) {\r\n  const data = JSON.parse(response);\r\n\r\n  if (data.hits.length === 0) {\r\n    alert({\r\n      text: 'Сорян, нічого не знайшов',\r\n      delay: 2000,\r\n    });\r\n    queryField.value = '';\r\n    return;\r\n  }\r\n  // цей маньовр робиться тому, що у markup у нас строка, а нам треба\r\n  // валідну html розмітку передати у ScrollInstance\r\n  // використовується проксі елемент з дівом, браузер парсить весь його вміст\r\n  // у валідну розмітку, яку ми потім забираємо\r\n  const markup = data.hits.map(data => template(data)).join('');\r\n  const proxyElem = document.createElement('div');\r\n  proxyElem.innerHTML = markup;\r\n  infScrollInstance.appendItems(proxyElem.querySelectorAll('.item'));\r\n});\r\n\r\nfunction searchHandler(e) {\r\n  e.preventDefault();\r\n  query = queryField.value;\r\n\r\n  if (query === '') {\r\n    alert({\r\n      text: 'Введи пошуковий запит',\r\n      delay: 2000,\r\n    });\r\n    return;\r\n  }\r\n  // infScrollInstance.option({\r\n  //   scrollThreshold: 100,\r\n  // });\r\n  gallery.innerHTML = '';\r\n  infScrollInstance.pageIndex = 1;\r\n  infScrollInstance.loadNextPage();\r\n}\r\n// ще залити на гіт","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <div class=\\\"img-container\\\">\\r\\n            <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":22},\"end\":{\"line\":4,\"column\":38}}}) : helper)))\n    + \"\\\" class=\\\"img-item\\\" alt=\\\"some photo\\\" width=320px data-bigurl=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":99},\"end\":{\"line\":4,\"column\":116}}}) : helper)))\n    + \"\\\" />\\r\\n        </div>\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":22},\"end\":{\"line\":9,\"column\":31}}}) : helper)))\n    + \"</span>\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":22},\"end\":{\"line\":13,\"column\":31}}}) : helper)))\n    + \"</span>\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":22},\"end\":{\"line\":17,\"column\":34}}}) : helper)))\n    + \"</span>\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":22},\"end\":{\"line\":21,\"column\":35}}}) : helper)))\n    + \"</span>\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\";\n},\"useData\":true});"],"sourceRoot":""}